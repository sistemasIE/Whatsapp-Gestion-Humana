import{a as A}from"./chunk-OC6YCXVP.js";import{g as I,h as M,k as D,l as N,q as L,r as k,u as P,x as T}from"./chunk-YPUWGHW6.js";import{a as u}from"./chunk-ARVTP27M.js";import{$a as S,Da as g,Ia as C,Oa as c,Qa as i,Ra as n,Ta as v,Wa as p,X as h,Xa as _,Y as b,Ya as o,Za as d,_a as x,ab as O,bb as y,eb as E,fb as w,hb as F,ua as r,za as f}from"./chunk-N26TRWMU.js";var $=(s,e)=>({"bg-success":s,"bg-secondary":e});function R(s,e){if(s&1){let t=v();i(0,"tr")(1,"td"),o(2),w(3,"slice"),n(),i(4,"td"),o(5),n(),i(6,"td"),o(7),n(),i(8,"td")(9,"span",6),o(10),n()(),i(11,"td")(12,"button",7),p("click",function(){let m=h(t).$implicit,l=_();return b(l.aceptar(m.idOtros))}),o(13," Aceptar "),n(),i(14,"button",8),p("click",function(){let m=h(t).$implicit,l=_();return b(l.rechazar(m.idOtros))}),o(15," Rechazar "),n()()()}if(s&2){let t=e.$implicit;r(2),d(F(3,6,t.chatId.toString(),2,-1)),r(3),d(t.nombre),r(2),d(t.motivo),r(2),c("ngClass",E(10,$,t.revisado,!t.revisado)),r(),x(" ",t.revisado?"S\xED":"No"," "),r(2),c("disabled",t.revisado)}}var V=class s{constructor(e){this.http=e}otros=[];filtrados=[];termino="";ngOnInit(){this.obtenerDatos()}obtenerDatos(){this.http.get(`${u.API_URL}/otros/`).subscribe(e=>{this.otros=e.data,this.aplicarFiltro()})}aplicarFiltro(){let e=this.termino.toLowerCase().trim();this.filtrados=this.otros.filter(t=>t.motivo.toLowerCase().includes(e)||t.nombre.toLowerCase().includes(e)||t.revisado.toString().includes(e))}aceptar(e){this.http.put(`${u.API_URL}/otros/${e}`,{revisado:!0}).subscribe(()=>this.obtenerDatos())}rechazar(e){this.http.delete(`${u.API_URL}/otros/${e}`).subscribe(()=>this.obtenerDatos())}static \u0275fac=function(t){return new(t||s)(f(A))};static \u0275cmp=g({type:s,selectors:[["app-others"]],decls:19,vars:2,consts:[[1,"container","mt-4"],[1,"underline"],["type","text","placeholder","Buscar por nombre, motivo o estado...",1,"form-control","my-3",3,"ngModelChange","input","ngModel"],[1,"table","table-hover","table-bordered"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"],[1,"btn","btn-success","btn-sm","me-2",3,"click","disabled"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(t,a){t&1&&(i(0,"div",0)(1,"h3",1),o(2,"Consultas y Otros\u2753"),n(),i(3,"input",2),y("ngModelChange",function(l){return O(a.termino,l)||(a.termino=l),l}),p("input",function(){return a.aplicarFiltro()}),n(),i(4,"table",3)(5,"thead",4)(6,"tr")(7,"th"),o(8,"N\xFAmero Celular"),n(),i(9,"th"),o(10,"Nombre"),n(),i(11,"th"),o(12,"Motivo"),n(),i(13,"th"),o(14,"Revisado"),n(),i(15,"th"),o(16,"Acciones"),n()()(),i(17,"tbody"),C(18,R,16,13,"tr",5),n()()()),t&2&&(r(3),S("ngModel",a.termino),r(15),c("ngForOf",a.filtrados))},dependencies:[T,L,k,P,N,I,M,D],encapsulation:2})};export{V as OthersComponent};
